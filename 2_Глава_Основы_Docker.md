# Основы Docker

## Архитектура Docker

Чтобы понять как наиболее эффективно использовать Docker и некоторые не вполне
очевидные его свойства, необходимо хотя бы в целом представлять себе, каким образом организована совместная работа
компонентов платформы, скрытых от пользователя.

![](img/4.1.png)

- в центре расположен демон Docker (Docker daemon), ответственный за создание, запуск и контроль
  работы контейнеров, а так же за создание и хранение образов. Контейнеры и образы представлены в 
  правой части диаграммы. Демон Docker запускается командой `docker daemon`, обычно об этом заботится
  ОС хоста;


- клиент Docker, размещенный в левой части диаграммы, используется для диалога с демоном Docker по 
  протоколу HTTP. По умолчанию это соединение устанавливается через сокет домена Unix, но также может
  использоваться TCP-сокет для поддержки соединений с удаленными клиентами или дискриптор файла для 
  сокетов, управляемый `systemd`. Так как все затруднения организовать соединене с удаленным демонами
  Docker и разработать привязки (bindings) к нужному языку программирования, но при этом следует учитывать
  особенности реализации этих возможностей, например обязательное наличие контекста создания
  (building context), описанного в соответствующем разделе данной книги. Интерфейсы прикладного 
  программирования, используемые для организации обмена данными с демоном, четко определены и 
  подробно документированы, что позволяет разработчиками писать программы, взаимодействующие 
  напрямую с демоном, без использования клиента Docker. Клиент и демон Docker распространяются 
  как отдельные независимые бинарные файлы;


- реестры Docker используют для хранения и расположения образов. Реестром, выбираемым по умолчанию, является 
  Docker Hub, на котором хранится тысячи общедоступных образов, а так же управляемые "официальные" образы.
  Многие организации создают собственные реестры, которые используются для хранения коммерческих и приватных 
  образов и для устранения накладных расходов, связанных с загрузкой образов через интернет. В разделе
  "Создание собственного реестра" содержится более подробная информация об организации и сопровождении
  нового частного реестра. Демон Docker загружает образы из реестров по запросу `docker pull`. Кроме того, 
  он выполняет автоматическую загрузку образов, указанных в запросе `docker run` и в инструкции `FROM` файла
  Dockerfile, если эти образы недоступны на локальной системе.